(()=>{"use strict";var e,t={},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return t[e](a,a.exports,r),a.loaded=!0,a.exports}function o(e,t,n){var r,o,a;if(0==t)r=o=a=n;else{function l(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var i=n<.5?n*(1+t):n+t-n*t,s=2*n-i;r=l(s,i,e+1/3),o=l(s,i,e),a=l(s,i,e-1/3)}return[255*r,255*o,255*a]}function a(e,t,n){e/=255,t/=255,n/=255;var r,o,a=Math.max(e,t,n),i=Math.min(e,t,n),s=(a+i)/2;if(a==i)r=o=0;else{var l=a-i;switch(o=s>.5?l/(2-a-i):l/(a+i),a){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return[r,o,s]}r.m=t,r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>e+".index.js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},r.l=(t,n,o,a)=>{if(e[t])e[t].push(n);else{var i,s;if(void 0!==o)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==t){i=u;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.src=t),e[t]=[n];var d=(n,r)=>{i.onerror=i.onload=null,clearTimeout(m);var o=e[t];if(delete e[t],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((e=>e(r))),n)return n(r)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=d.bind(null,i.onerror),i.onload=d.bind(null,i.onload),s&&document.head.appendChild(i)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{r.b=document.baseURI||self.location.href;var e={792:0};r.f.j=(t,n)=>{var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise(((n,r)=>o=e[t]=[n,r]));n.push(o[2]=a);var i=r.p+r.u(t),s=new Error;r.l(i,(n=>{if(r.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,o[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var o,a,[i,s,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);l&&l(r)}for(t&&t(n);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),async function(){let e,t,n,i;if(await(async e=>{try{return"undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(e){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))){i=await r.e(9).then(r.bind(r,390));let{memory:o}=await i.default();await i.initThreadPool(navigator.hardwareConcurrency),e=i.new_buffer,t=i.harmonize_rayon,n=o}else{i=await r.e(505).then(r.bind(r,886));let{memory:o}=await i.default();e=i.new_buffer,t=i.harmonize_rayon,n=o}document.getElementById("wasm-title").innerText="wasm multi-thread";const s=new Image,l=new Image,c=document.getElementById("wasm-t"),u=document.getElementById("js-t");let d=null,m=null;function f(r,o,i,s){const l=document.getElementById("c1"),u=r.width,f=r.height;l.width=u,l.height=f;const h=l.getContext("2d");h.drawImage(r,0,0,u,f);let g=performance.now();if(!d){d=e("test",u*f*4);const t=h.getImageData(0,0,u,f);m=new Uint8ClampedArray(n.buffer,d,u*f*4),m.set(t.data)}let[p,w]=a(o,i,s);t("test",p,w),h.putImageData(new ImageData(m.slice(),u,f),0,0);let y=performance.now();console.log("wasm",Math.floor(y-g)+"ms"),c.innerHTML=Math.floor(y-g)+"ms"}function h(e,t,n,r){const i=document.getElementById("c2"),s=e.width,l=e.height;i.width=s,i.height=l;const c=i.getContext("2d");c.drawImage(e,0,0,s,l);const d=c.getImageData(0,0,s,l);let m=performance.now();const f=d.data;let[h,g]=a(t,n,r);for(let e=0;e<f.length;e+=4){const[t,n,r]=[f[e],f[e+1],f[e+2]],i=a(t,n,r);i[0]=h,g>.1&&(i[1]=g);const s=o(i[0],i[1],i[2]);f[e]=s[0],f[e+1]=s[1],f[e+2]=s[2]}c.putImageData(d,0,0);let p=performance.now();console.log("JS",Math.floor(p-m)+"ms"),u.innerHTML=Math.floor(p-m)+"ms"}s.onload=()=>{f(s,202,208,195)},l.onload=()=>{h(l,202,208,195)},s.crossOrigin="Anonymous",l.crossOrigin="Anonymous";const g=document.getElementById("origin").src;console.log(g),s.src=g,l.src=g,document.getElementById("color-input").oninput=e=>{const t=function(e){let t=e.replace("#","");if(t.length%3)return"hex格式不正确！";let n=t.length/3,r=6/t.length;return[parseInt("0x"+t.substring(0*n,1*n))**r,parseInt("0x"+t.substring(1*n,2*n))**r,parseInt("0x"+t.substring(2*n))**r]}(e.target.value);f(s,...t),h(l,...t)}}()})();